{"ast":null,"code":"import { Login } from '../models/Login.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/profile-form.service\";\nfunction FetchDataComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"Invalid user name or password\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class FetchDataComponent {\n  constructor(router, service) {\n    this.router = router;\n    this.service = service;\n    this.login = new Login();\n    this.invalidLogin = false;\n  }\n  onSubmit(loginSubmit) {\n    this.service.login(this.login).subscribe({\n      next: res => {\n        const token = res.token;\n        localStorage.setItem(\"jwt\", token);\n        this.router.navigateByUrl('');\n      },\n      error: err => {\n        this.invalidLogin = true;\n        console.log(err);\n      }\n    });\n  }\n}\nFetchDataComponent.ɵfac = function FetchDataComponent_Factory(t) {\n  return new (t || FetchDataComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ProfileFormService));\n};\nFetchDataComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FetchDataComponent,\n  selectors: [[\"app-fetch-data\"]],\n  decls: 16,\n  vars: 3,\n  consts: [[3, \"submit\"], [\"loginSubmit\", \"ngForm\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"email\"], [\"id\", \"email\", \"type\", \"email\", \"name\", \"email\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"for\", \"password\"], [\"id\", \"password\", \"type\", \"password\", \"name\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [1, \"alert\", \"alert-danger\"]],\n  template: function FetchDataComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r4 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Login page\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0, 1);\n      i0.ɵɵlistener(\"submit\", function FetchDataComponent_Template_form_submit_2_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r0 = i0.ɵɵreference(3);\n        return i0.ɵɵresetView(ctx.onSubmit(_r0));\n      });\n      i0.ɵɵtemplate(4, FetchDataComponent_div_4_Template, 2, 0, \"div\", 2);\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵelementStart(6, \"label\", 3);\n      i0.ɵɵtext(7, \"Email: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"input\", 4, 5);\n      i0.ɵɵlistener(\"ngModelChange\", function FetchDataComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.login.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"label\", 6);\n      i0.ɵɵtext(11, \"Password: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 7, 8);\n      i0.ɵɵlistener(\"ngModelChange\", function FetchDataComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.login.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 9);\n      i0.ɵɵtext(15, \"Login\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.invalidLogin);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.login.email);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.login.password);\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AACA,SAASA,KAAK,QAAQ,uBAAuB;;;;;;ICC3CC,+BAAqD;IAAAA,6CAA6B;IAAAA,iBAAM;;;ADQ1F,OAAM,MAAOC,kBAAkB;EAK9BC,YACWC,MAAc,EACdC,OAA2B;IAD3B,WAAM,GAAND,MAAM;IACN,YAAO,GAAPC,OAAO;IALnB,UAAK,GAAU,IAAIL,KAAK,EAAE;IAC1B,iBAAY,GAAY,KAAK;EAKzB;EACJM,QAAQ,CAACC,WAAmB;IAC1B,IAAI,CAACF,OAAO,CAACG,KAAK,CAAC,IAAI,CAACA,KAAK,CAAC,CAC7BC,SAAS,CAAC;MACTC,IAAI,EAAEC,GAAG,IAAG;QACV,MAAMC,KAAK,GAASD,GAAI,CAACC,KAAK;QAC9BC,YAAY,CAACC,OAAO,CAAC,KAAK,EAACF,KAAK,CAAC;QACjC,IAAI,CAACR,MAAM,CAACW,aAAa,CAAC,EAAE,CAAC;MAC/B,CAAC;MACDC,KAAK,EAAEC,GAAG,IAAG;QACX,IAAI,CAACC,YAAY,GAAG,IAAI;QACxBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAClB;KACD,CAAC;EACJ;;AAtBaf,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAmB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCV/BxB,0BAAI;MAAAA,0BAAU;MAAAA,iBAAK;MACnBA,kCAA6D;MAAjCA;QAAAA;QAAA;QAAA,OAAUA,gCAAqB;MAAA,EAAC;MAC1DA,mEAAwF;MACxFA,qBAAI;MACJA,gCAAmB;MAAAA,uBAAO;MAAAA,iBAAQ;MACjCA,mCAAuF;MAA1BA;QAAA;MAAA,EAAyB;MAAtFA,iBAAuF;MACxFA,iCAAsB;MAAAA,2BAAU;MAAAA,iBAAQ;MACvCA,oCAAsG;MAA7BA;QAAA;MAAA,EAA4B;MAArGA,iBAAsG;MAEtGA,kCAA8C;MAAAA,sBAAK;MAAAA,iBAAS;;;MAPvDA,eAAkB;MAAlBA,uCAAkB;MAGsCA,eAAyB;MAAzBA,yCAAyB;MAEbA,eAA4B;MAA5BA,4CAA4B","names":["Login","i0","FetchDataComponent","constructor","router","service","onSubmit","loginSubmit","login","subscribe","next","res","token","localStorage","setItem","navigateByUrl","error","err","invalidLogin","console","log","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Kateryna_Yavna\\source\\repos\\HealthHubPro\\HealthHubPro\\HealthHub2\\HealthHubPro\\ClientApp\\src\\app\\fetch-data\\fetch-data.component.ts","C:\\Users\\Kateryna_Yavna\\source\\repos\\HealthHubPro\\HealthHubPro\\HealthHub2\\HealthHubPro\\ClientApp\\src\\app\\fetch-data\\fetch-data.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Login } from '../models/Login.model';\r\nimport { NgForm } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ProfileFormService } from '../services/profile-form.service';\r\n\r\n@Component({\r\n  selector: 'app-fetch-data',\r\n  templateUrl: './fetch-data.component.html'\r\n})\r\nexport class FetchDataComponent {\r\n \r\nlogin: Login = new Login();\r\ninvalidLogin: boolean = false;\r\n\r\n constructor(\r\n    private router: Router,\r\n    private service: ProfileFormService,\r\n ) {}\r\nonSubmit(loginSubmit: NgForm){\r\n  this.service.login(this.login)\r\n  .subscribe({\r\n    next: res => {\r\n      const token = (<any>res).token;\r\n      localStorage.setItem(\"jwt\",token);\r\n      this.router.navigateByUrl('');\r\n    },\r\n    error: err => {\r\n      this.invalidLogin = true;\r\n      console.log(err);\r\n    }\r\n  });\r\n}\r\n}\r\n\r\n","<h1>Login page</h1>\r\n<form #loginSubmit = ngForm (submit)=\"onSubmit(loginSubmit)\">\r\n  <div *ngIf=\"invalidLogin\" class=\"alert alert-danger\">Invalid user name or password</div>\r\n  <br>\r\n  <label for=\"email\">Email: </label>\r\n   <input id=\"email\" #email=\"ngModel\" type=\"email\" name=\"email\" [(ngModel)]=\"login.email\">\r\n  <label for=\"password\">Password: </label>\r\n   <input id=\"password\" #password=\"ngModel\" type=\"password\" name=\"password\" [(ngModel)]=\"login.password\">\r\n\r\n   <button class=\"btn btn-success\" type=\"submit\">Login</button>\r\n</form>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}